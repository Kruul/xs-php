В XS-PHP настроена автозагрузка классов контроллеров, моделей и плагинов, поэтому необходимо соблюдать правила именования классов.

### Правила организации хранения контроллеров.
* Контроллеры должны находится в директории **/controllers/**;
* Название класса контроллера должно состоять из префикса **Controller_** и названия контроллера с большой буквы;
* Название контроллера может быть разделено знаком нижнего подчеркивания "_", в случае, если контроллер находится в поддиректории;
* Название файла контроллера должно состоять из 1 слова, соответствующего правилам названия классов PHP, это слово должно быть последним из слов названия класса, разделенных знаком нижнего подчеркивания "_".

### Примеры
Контроллер **user** должен находится в файле **/controllers/user.php**, класс контроллера должен называться **Controller_User**.

Контроллер **user_post** должен находится в файле **/controllers/user/post.php**, класс контроллера должен называться **Controller_User_Post**.

### Общая информация

Контроллер должен наследоваться от базового класса **Controller**, либо от другого контроллера, который наследуется от базового.

Действия в контроллере должны иметь в названии префикс **action_**.
Например, для URI **/admin/settings** необходимо создать публичный метод **action_settings** в контроллере **Controller_Admin**.

Для короткого URI без указания действия, например, **/admin** используется действие **index**, которое также будет доступно по URI **/admin/index**.

Для корневого URI **/** используется действие **index** в контроллере **Controller_Index**.

Если для хранение группы контроллеров используется поддиректория, например, **/contollers/admin/users.php**, то стандартный URI адрес для такого контроллера будет **/admin_users/action**, а не **/admin/users/action**. Это сделано для предотвращения конфликта URI адресов для разных контроллеров. Как исправить такое поведение и сделать роуты вида **/admin/users/action** для контроллеров в поддиректориях смотрите раздел документации **Роутер**.

Для общих по какому-либо признаку контроллеров удобно создавать базовые контроллеры. Например, для всех контроллеров, где необходима проверка авторизации необходимо создать базовый контроллер с кодом проверки в **before** методе и наследовать контроллеры от него.
Пример базового контроллера находится в файле **/controllers/base.php**.

### Результат выполнения метода действия

Результат выполнения метода действия должен быть записан в свойство **response** текущего экземпляра контроллера:
```php
// Возвращаем текст
$this->response = 'result';

// Возвращаем экземпляр вида
$view = View::factory('page');
$this->response = $view;

// Возвращаем json
// Если записан массив, он будет обработан json_encode автоматически
$this->response = $data;
```

Запись результата в свойство, а не прямой вывод позволит плагинам обработать результат перед выводом в ответ запроса. Пример такого плагина - минификатор HTML, находится в файле **/plugins/html_minify.php**.

### REST действия

Для создания отдельных обработчиков для методов HTTP запросов действие в контроллере должно иметь в названии префикс **method\_action\_**.

Например, для обработки только POST запроса на URI **/user/create** необходимо создать публичный метод **post_action_create** в контроллере **Controller_User**.

При этом, если нет публичного метода контроллера с HTTP методом в префиксе названия, то используется общий метод контроллера с префиксом **action_**.
